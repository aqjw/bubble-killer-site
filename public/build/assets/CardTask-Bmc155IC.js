import{D as fe,r as v,E as D,G as A,A as Ve,B as Be,H as Re,I as R,J as re,K as Ce,L as y,M as b,F as H,a as V,o as S,g as U,w as _,b as B,u as K,k as je,c as L,l as se,d as c,N as k,O as Ee,f as Oe,t as C,e as Pe}from"./app-BiHsmihK.js";/**
 * Vue 3 Carousel 0.3.4
 * (c) 2024
 * @license MIT
 */const g={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},Me={itemsToShow:{default:g.itemsToShow,type:Number},itemsToScroll:{default:g.itemsToScroll,type:Number},wrapAround:{default:g.wrapAround,type:Boolean},throttle:{default:g.throttle,type:Number},snapAlign:{default:g.snapAlign,validator(e){return["start","end","center","center-even","center-odd"].includes(e)}},transition:{default:g.transition,type:Number},breakpoints:{default:g.breakpoints,type:Object},autoplay:{default:g.autoplay,type:Number},pauseAutoplayOnHover:{default:g.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:g.mouseDrag,type:Boolean},touchDrag:{default:g.touchDrag,type:Boolean},dir:{default:g.dir,validator(e){return["rtl","ltr"].includes(e)}},i18n:{default:g.i18n,type:Object},settings:{default(){return{}},type:Object}};function $e({config:e,slidesCount:n}){const{snapAlign:t,wrapAround:a,itemsToShow:i=1}=e;if(a)return Math.max(n-1,0);let r;switch(t){case"start":r=n-i;break;case"end":r=n-1;break;case"center":case"center-odd":r=n-Math.ceil((i-.5)/2);break;case"center-even":r=n-Math.ceil(i/2);break;default:r=0;break}return Math.max(r,0)}function ze({config:e,slidesCount:n}){const{wrapAround:t,snapAlign:a,itemsToShow:i=1}=e;let r=0;if(t||i>n)return r;switch(a){case"start":r=0;break;case"end":r=i-1;break;case"center":case"center-odd":r=Math.floor((i-1)/2);break;case"center-even":r=Math.floor((i-2)/2);break;default:r=0;break}return r}function ue({val:e,max:n,min:t}){return n<t?e:Math.min(Math.max(e,t),n)}function He({config:e,currentSlide:n,slidesCount:t}){const{snapAlign:a,wrapAround:i,itemsToShow:r=1}=e;let s=n;switch(a){case"center":case"center-odd":s-=(r-1)/2;break;case"center-even":s-=(r-2)/2;break;case"end":s-=r-1;break}return i?s:ue({val:s,max:t-r,min:0})}function Le(e){return e?e.reduce((n,t)=>{var a;return t.type===H?[...n,...Le(t.children)]:((a=t.type)===null||a===void 0?void 0:a.name)==="CarouselSlide"?[...n,t]:n},[]):[]}function ce({val:e,max:n,min:t=0}){return e>n?ce({val:e-(n+1),max:n,min:t}):e<t?ce({val:e+(n+1),max:n,min:t}):e}function Ue(e,n){let t;return n?function(...a){const i=this;t||(e.apply(i,a),t=!0,setTimeout(()=>t=!1,n))}:e}function Xe(e,n){let t;return function(...a){t&&clearTimeout(t),t=setTimeout(()=>{e(...a),t=null},n)}}function Ge(e="",n={}){return Object.entries(n).reduce((t,[a,i])=>t.replace(`{${a}}`,String(i)),e)}var Ye=fe({name:"ARIA",setup(){const e=b("config",D(Object.assign({},g))),n=b("currentSlide",v(0)),t=b("slidesCount",v(0));return()=>y("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},Ge(e.i18n.itemXofY,{currentSlide:n.value+1,slidesCount:t.value}))}}),Fe=fe({name:"Carousel",props:Me,setup(e,{slots:n,emit:t,expose:a}){var i;const r=v(null),s=v([]),d=v(0),u=v(0),o=D(Object.assign({},g));let p=Object.assign({},g),x;const f=v((i=e.modelValue)!==null&&i!==void 0?i:0),I=v(0),X=v(0),O=v(0),P=v(0);let N,Q;A("config",o),A("slidesCount",u),A("currentSlide",f),A("maxSlide",O),A("minSlide",P),A("slideWidth",d);function Z(){x=Object.assign({},e.breakpoints),p=Object.assign(Object.assign(Object.assign({},p),e),{i18n:Object.assign(Object.assign({},p.i18n),e.i18n),breakpoints:void 0}),me(p)}function G(){if(!x||!Object.keys(x).length)return;const l=Object.keys(x).map(m=>Number(m)).sort((m,T)=>+T-+m);let h=Object.assign({},p);l.some(m=>{const T=window.matchMedia(`(min-width: ${m}px)`).matches;return T&&(h=Object.assign(Object.assign({},h),x[m])),T}),me(h)}function me(l){Object.entries(l).forEach(([h,m])=>o[h]=m)}const ge=Xe(()=>{G(),Y(),$()},16);function $(){if(!r.value)return;const l=r.value.getBoundingClientRect();d.value=l.width/o.itemsToShow}function Y(){u.value<=0||(X.value=Math.ceil((u.value-1)/2),O.value=$e({config:o,slidesCount:u.value}),P.value=ze({config:o,slidesCount:u.value}),o.wrapAround||(f.value=ue({val:f.value,max:O.value,min:P.value})))}Ve(()=>{Be(()=>$()),setTimeout(()=>$(),1e3),G(),ye(),window.addEventListener("resize",ge,{passive:!0}),t("init")}),Re(()=>{Q&&clearTimeout(Q),N&&clearInterval(N),window.removeEventListener("resize",ge,{passive:!0})});let w=!1;const F={x:0,y:0},W={x:0,y:0},M=D({x:0,y:0}),q=v(!1),ee=v(!1),De=()=>{q.value=!0},Ie=()=>{q.value=!1};function pe(l){["INPUT","TEXTAREA","SELECT"].includes(l.target.tagName)||(w=l.type==="touchstart",w||l.preventDefault(),!(!w&&l.button!==0||j.value)&&(F.x=w?l.touches[0].clientX:l.clientX,F.y=w?l.touches[0].clientY:l.clientY,document.addEventListener(w?"touchmove":"mousemove",he,!0),document.addEventListener(w?"touchend":"mouseup",be,!0)))}const he=Ue(l=>{ee.value=!0,W.x=w?l.touches[0].clientX:l.clientX,W.y=w?l.touches[0].clientY:l.clientY;const h=W.x-F.x,m=W.y-F.y;M.y=m,M.x=h},o.throttle);function be(){const l=o.dir==="rtl"?-1:1,h=Math.sign(M.x)*.4,m=Math.round(M.x/d.value+h)*l;if(m&&!w){const T=Ae=>{window.removeEventListener("click",T,!0)};window.addEventListener("click",T,!0)}E(f.value-m),M.x=0,M.y=0,ee.value=!1,document.removeEventListener(w?"touchmove":"mousemove",he,!0),document.removeEventListener(w?"touchend":"mouseup",be,!0)}function ye(){!o.autoplay||o.autoplay<=0||(N=setInterval(()=>{o.pauseAutoplayOnHover&&q.value||J()},o.autoplay))}function we(){N&&(clearInterval(N),N=null),ye()}const j=v(!1);function E(l){const h=o.wrapAround?l:ue({val:l,max:O.value,min:P.value});f.value===h||j.value||(t("slide-start",{slidingToIndex:l,currentSlideIndex:f.value,prevSlideIndex:I.value,slidesCount:u.value}),j.value=!0,I.value=f.value,f.value=h,Q=setTimeout(()=>{if(o.wrapAround){const m=ce({val:h,max:O.value,min:0});m!==f.value&&(f.value=m,t("loop",{currentSlideIndex:f.value,slidingToIndex:l}))}t("update:modelValue",f.value),t("slide-end",{currentSlideIndex:f.value,prevSlideIndex:I.value,slidesCount:u.value}),j.value=!1,we()},o.transition))}function J(){E(f.value+o.itemsToScroll)}function te(){E(f.value-o.itemsToScroll)}const Se={slideTo:E,next:J,prev:te};A("nav",Se),A("isSliding",j);const xe=R(()=>He({config:o,currentSlide:f.value,slidesCount:u.value}));A("slidesToScroll",xe);const Ne=R(()=>{const l=o.dir==="rtl"?-1:1,h=xe.value*d.value*l;return{transform:`translateX(${M.x-h}px)`,transition:`${j.value?o.transition:0}ms`,margin:o.wrapAround?`0 -${u.value*d.value}px`:"",width:"100%"}});function _e(){Z(),G(),Y(),$(),we()}Object.keys(Me).forEach(l=>{["modelValue"].includes(l)||re(()=>e[l],_e)}),re(()=>e.modelValue,l=>{l!==f.value&&E(Number(l))}),re(u,Y),t("before-init"),Z();const ke={config:o,slidesCount:u,slideWidth:d,next:J,prev:te,slideTo:E,currentSlide:f,maxSlide:O,minSlide:P,middleSlide:X};a({updateBreakpointsConfigs:G,updateSlidesData:Y,updateSlideWidth:$,initDefaultConfigs:Z,restartCarousel:_e,slideTo:E,next:J,prev:te,nav:Se,data:ke});const ne=n.default||n.slides,ae=n.addons,Te=D(ke);return()=>{const l=Le(ne==null?void 0:ne(Te)),h=(ae==null?void 0:ae(Te))||[];l.forEach((oe,le)=>oe.props.index=le);let m=l;if(o.wrapAround){const oe=l.map((ie,z)=>Ce(ie,{index:-l.length+z,isClone:!0,key:`clone-before-${z}`})),le=l.map((ie,z)=>Ce(ie,{index:l.length+z,isClone:!0,key:`clone-after-${z}`}));m=[...oe,...l,...le]}s.value=l,u.value=Math.max(l.length,1);const T=y("ol",{class:"carousel__track",style:Ne.value,onMousedownCapture:o.mouseDrag?pe:null,onTouchstartPassiveCapture:o.touchDrag?pe:null},m),Ae=y("div",{class:"carousel__viewport"},T);return y("section",{ref:r,class:{carousel:!0,"is-sliding":j.value,"is-dragging":ee.value,"is-hover":q.value,"carousel--rtl":o.dir==="rtl"},dir:o.dir,"aria-label":o.i18n.ariaGallery,tabindex:"0",onMouseenter:De,onMouseleave:Ie},[Ae,h,y(Ye)])}}}),de;(function(e){e.arrowUp="arrowUp",e.arrowDown="arrowDown",e.arrowRight="arrowRight",e.arrowLeft="arrowLeft"})(de||(de={}));const We={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};function qe(e){return e in de}const ve=e=>{const n=b("config",D(Object.assign({},g))),t=String(e.name),a=`icon${t.charAt(0).toUpperCase()+t.slice(1)}`;if(!t||typeof t!="string"||!qe(t))return;const i=We[t],r=y("path",{d:i}),s=n.i18n[a]||e.title||t,d=y("title",s);return y("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":s},[d,r])};ve.props={name:String,title:String};const Je=(e,{slots:n,attrs:t})=>{const{next:a,prev:i}=n||{},r=b("config",D(Object.assign({},g))),s=b("maxSlide",v(1)),d=b("minSlide",v(1)),u=b("currentSlide",v(1)),o=b("nav",{}),{dir:p,wrapAround:x,i18n:f}=r,I=p==="rtl",X=y("button",{type:"button",class:["carousel__prev",!x&&u.value<=d.value&&"carousel__prev--disabled",t==null?void 0:t.class],"aria-label":f.ariaPreviousSlide,onClick:o.prev},(i==null?void 0:i())||y(ve,{name:I?"arrowRight":"arrowLeft"})),O=y("button",{type:"button",class:["carousel__next",!x&&u.value>=s.value&&"carousel__next--disabled",t==null?void 0:t.class],"aria-label":f.ariaNextSlide,onClick:o.next},(a==null?void 0:a())||y(ve,{name:I?"arrowLeft":"arrowRight"}));return[X,O]};var Ke=fe({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:n}){const t=b("config",D(Object.assign({},g))),a=b("currentSlide",v(0)),i=b("slidesToScroll",v(0)),r=b("isSliding",v(!1)),s=R(()=>e.index===a.value),d=R(()=>e.index===a.value-1),u=R(()=>e.index===a.value+1),o=R(()=>{const p=Math.floor(i.value),x=Math.ceil(i.value+t.itemsToShow-1);return e.index>=p&&e.index<=x});return()=>{var p;return y("li",{style:{width:`${100/t.itemsToShow}%`},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":o.value,"carousel__slide--active":s.value,"carousel__slide--prev":d.value,"carousel__slide--next":u.value,"carousel__slide--sliding":r.value},"aria-hidden":!o.value},(p=n.default)===null||p===void 0?void 0:p.call(n,{isActive:s.value,isClone:e.isClone,isPrev:d.value,isNext:u.value,isSliding:r.value,isVisible:o.value}))}}});const Qe=["src"],Ze={__name:"DialogGallery",props:{images:{type:Array,required:!0}},setup(e,{expose:n}){const t=v(!1),a=v(0);return n({open:r=>{a.value=r,t.value=!0}}),(r,s)=>{const d=V("v-dialog");return S(),U(d,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=u=>t.value=u),width:"60%",opacity:.6},{default:_(()=>[B(K(Fe),{"model-value":a.value},{addons:_(()=>[e.images.length>1?(S(),U(K(Je),{key:0})):je("",!0)]),default:_(()=>[(S(!0),L(H,null,se(e.images,(u,o)=>(S(),U(K(Ke),{key:o},{default:_(()=>[c("img",{src:u,cover:"",class:"rounded-md max-w-[80vw] mx-auto max-h-[80vh] object-cover"},null,8,Qe)]),_:2},1024))),128))]),_:1},8,["model-value"])]),_:1},8,["modelValue"])}}};function et(e,n=k.DATE_FULL){const t=k.fromISO(e);return typeof n=="string"?t.toFormat(n):t.toLocaleString(n)}function tt(e,n=k.DATE_FULL){return n(e)}function nt(e,n=k.DATETIME_MED){return k.fromISO(e).toLocaleString(n)}function at(e,n=k.TIME_SIMPLE){return k.fromISO(e).toLocaleString(n)}function ot(e,n={}){let{reverse:t=!1,parts:a=2,from:i=null}=n;const r=k.fromISO(e),s=["months","days","hours","minutes"];i=i==null?k.now():k.fromISO(i);const d=t?r.diff(i,s):i.diff(r,s);return lt(Ee.fromObject(d.toObject()),a)}function lt(e,n=2){const t=["years","months","days","hours","minutes","seconds"],i=Object.entries(e.shiftTo(...t).normalize().toObject()).filter(([s,d])=>d>0).map(([s,d])=>[s,Math.ceil(d)]).slice(0,n);return Ee.fromObject(i.length===0?{[t[n-1]]:0}:Object.fromEntries(i)).toHuman()}const it={format:et,date:tt,datetime:nt,time:at,toHuman:ot},rt={class:"flex gap-4 p-4"},st={class:"w-1/3"},ut={class:"truncate max-w-12"},ct={class:"w-2/3 flex justify-end"},dt={key:0},vt={class:"-mt-3 text-sm italic opacity-70 mb-1"},ft={key:1,class:"flex justify-center divide-x-2 divide-gray-400 border-2 border-gray-400 rounded-lg shadow-lg overflow-hidden"},mt=["src","onClick"],pt={__name:"CardTask",props:{task:{type:Object,required:!0}},setup(e){const n=v(null);return(t,a)=>{const i=V("v-chip"),r=V("v-table"),s=V("v-list-item"),d=V("v-list"),u=V("v-card");return S(),U(u,{class:"bg-zinc-200 rounded-md",rounded:"lg",elevation:2},{default:_(()=>[c("div",rt,[c("div",st,[B(i,{class:"mb-3",size:"small"},{default:_(()=>[Oe("ID: "+C(e.task.id),1)]),_:1}),B(r,{density:"compact"},{default:_(()=>[c("tbody",null,[c("tr",null,[a[0]||(a[0]=c("td",{class:"opacity-70"},"Файл",-1)),c("td",ut,C(e.task.original_filename),1)]),c("tr",null,[a[1]||(a[1]=c("td",{class:"opacity-70"},"Загружено",-1)),c("td",null,C(K(it).toHuman(e.task.created_at,{parts:1}))+" назад ",1)]),c("tr",null,[a[2]||(a[2]=c("td",{class:"opacity-70"},"Статус",-1)),c("td",null,C(e.task.status),1)]),c("tr",null,[a[3]||(a[3]=c("td",{class:"opacity-70"},"Model",-1)),c("td",null,C(e.task.cleaning_model),1)]),c("tr",null,[a[4]||(a[4]=c("td",{class:"opacity-70"},"Mask Time",-1)),c("td",null,C(e.task.mask_time_seconds??"-")+" сек",1)]),c("tr",null,[a[5]||(a[5]=c("td",{class:"opacity-70"},"Clean Time",-1)),c("td",null,C(e.task.clean_time_seconds??"-")+" сек",1)])])]),_:1})]),c("div",ct,[e.task.type==="multiple"?(S(),L("div",dt,[c("div",vt," Всего файлов в архиве "+C(e.task.subtasks.length),1),B(d,{lines:"one","max-height":"16rem",class:"border rounded-lg"},{default:_(()=>[(S(!0),L(H,null,se(e.task.subtasks,(o,p)=>(S(),U(s,{key:p,title:o.original_filename,"prepend-avatar":o.files[0],class:"roundless",onClick:Pe(x=>t.$inertia.visit(t.route("tasks.show",o.id)),["stop","prevent"])},{default:_(()=>[B(i,{class:"mb-3",size:"small",density:"compact"},{default:_(()=>[Oe(" ID: "+C(o.id),1)]),_:2},1024)]),_:2},1032,["title","prepend-avatar","onClick"]))),128))]),_:1})])):(S(),L("div",ft,[(S(!0),L(H,null,se(e.task.files,(o,p)=>(S(),L(H,{key:p},[o?(S(),L("img",{key:0,src:o,class:"max-w-64 max-h-64 object-cover cursor-pointer",onClick:()=>n.value.open(p)},null,8,mt)):je("",!0)],64))),128)),B(Ze,{ref_key:"dialogGallery",ref:n,images:e.task.files},null,8,["images"])]))])])]),_:1})}}};export{it as D,pt as _};
