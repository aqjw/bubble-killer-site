import{D as fe,r as v,E as D,G as C,A as Ve,B as Be,H as Re,I as R,J as se,K as Ce,L as w,M as y,F as H,a as V,o as b,g as U,w as x,b as B,u as K,k as je,c as k,l as re,d as c,N as T,O as Ee,f as Oe,t as O,e as Pe}from"./app-BwrlO2uo.js";/**
 * Vue 3 Carousel 0.3.4
 * (c) 2024
 * @license MIT
 */const g={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},Me={itemsToShow:{default:g.itemsToShow,type:Number},itemsToScroll:{default:g.itemsToScroll,type:Number},wrapAround:{default:g.wrapAround,type:Boolean},throttle:{default:g.throttle,type:Number},snapAlign:{default:g.snapAlign,validator(e){return["start","end","center","center-even","center-odd"].includes(e)}},transition:{default:g.transition,type:Number},breakpoints:{default:g.breakpoints,type:Object},autoplay:{default:g.autoplay,type:Number},pauseAutoplayOnHover:{default:g.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:g.mouseDrag,type:Boolean},touchDrag:{default:g.touchDrag,type:Boolean},dir:{default:g.dir,validator(e){return["rtl","ltr"].includes(e)}},i18n:{default:g.i18n,type:Object},settings:{default(){return{}},type:Object}};function $e({config:e,slidesCount:n}){const{snapAlign:t,wrapAround:a,itemsToShow:l=1}=e;if(a)return Math.max(n-1,0);let s;switch(t){case"start":s=n-l;break;case"end":s=n-1;break;case"center":case"center-odd":s=n-Math.ceil((l-.5)/2);break;case"center-even":s=n-Math.ceil(l/2);break;default:s=0;break}return Math.max(s,0)}function ze({config:e,slidesCount:n}){const{wrapAround:t,snapAlign:a,itemsToShow:l=1}=e;let s=0;if(t||l>n)return s;switch(a){case"start":s=0;break;case"end":s=l-1;break;case"center":case"center-odd":s=Math.floor((l-1)/2);break;case"center-even":s=Math.floor((l-2)/2);break;default:s=0;break}return s}function ue({val:e,max:n,min:t}){return n<t?e:Math.min(Math.max(e,t),n)}function He({config:e,currentSlide:n,slidesCount:t}){const{snapAlign:a,wrapAround:l,itemsToShow:s=1}=e;let r=n;switch(a){case"center":case"center-odd":r-=(s-1)/2;break;case"center-even":r-=(s-2)/2;break;case"end":r-=s-1;break}return l?r:ue({val:r,max:t-s,min:0})}function Le(e){return e?e.reduce((n,t)=>{var a;return t.type===H?[...n,...Le(t.children)]:((a=t.type)===null||a===void 0?void 0:a.name)==="CarouselSlide"?[...n,t]:n},[]):[]}function ce({val:e,max:n,min:t=0}){return e>n?ce({val:e-(n+1),max:n,min:t}):e<t?ce({val:e+(n+1),max:n,min:t}):e}function Ue(e,n){let t;return n?function(...a){const l=this;t||(e.apply(l,a),t=!0,setTimeout(()=>t=!1,n))}:e}function Xe(e,n){let t;return function(...a){t&&clearTimeout(t),t=setTimeout(()=>{e(...a),t=null},n)}}function Ge(e="",n={}){return Object.entries(n).reduce((t,[a,l])=>t.replace(`{${a}}`,String(l)),e)}var Ye=fe({name:"ARIA",setup(){const e=y("config",D(Object.assign({},g))),n=y("currentSlide",v(0)),t=y("slidesCount",v(0));return()=>w("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},Ge(e.i18n.itemXofY,{currentSlide:n.value+1,slidesCount:t.value}))}}),Fe=fe({name:"Carousel",props:Me,setup(e,{slots:n,emit:t,expose:a}){var l;const s=v(null),r=v([]),d=v(0),u=v(0),o=D(Object.assign({},g));let p=Object.assign({},g),_;const f=v((l=e.modelValue)!==null&&l!==void 0?l:0),I=v(0),X=v(0),M=v(0),P=v(0);let N,Q;C("config",o),C("slidesCount",u),C("currentSlide",f),C("maxSlide",M),C("minSlide",P),C("slideWidth",d);function Z(){_=Object.assign({},e.breakpoints),p=Object.assign(Object.assign(Object.assign({},p),e),{i18n:Object.assign(Object.assign({},p.i18n),e.i18n),breakpoints:void 0}),me(p)}function G(){if(!_||!Object.keys(_).length)return;const i=Object.keys(_).map(m=>Number(m)).sort((m,A)=>+A-+m);let h=Object.assign({},p);i.some(m=>{const A=window.matchMedia(`(min-width: ${m}px)`).matches;return A&&(h=Object.assign(Object.assign({},h),_[m])),A}),me(h)}function me(i){Object.entries(i).forEach(([h,m])=>o[h]=m)}const ge=Xe(()=>{G(),Y(),$()},16);function $(){if(!s.value)return;const i=s.value.getBoundingClientRect();d.value=i.width/o.itemsToShow}function Y(){u.value<=0||(X.value=Math.ceil((u.value-1)/2),M.value=$e({config:o,slidesCount:u.value}),P.value=ze({config:o,slidesCount:u.value}),o.wrapAround||(f.value=ue({val:f.value,max:M.value,min:P.value})))}Ve(()=>{Be(()=>$()),setTimeout(()=>$(),1e3),G(),ye(),window.addEventListener("resize",ge,{passive:!0}),t("init")}),Re(()=>{Q&&clearTimeout(Q),N&&clearInterval(N),window.removeEventListener("resize",ge,{passive:!0})});let S=!1;const F={x:0,y:0},W={x:0,y:0},j=D({x:0,y:0}),q=v(!1),ee=v(!1),De=()=>{q.value=!0},Ie=()=>{q.value=!1};function pe(i){["INPUT","TEXTAREA","SELECT"].includes(i.target.tagName)||(S=i.type==="touchstart",S||i.preventDefault(),!(!S&&i.button!==0||E.value)&&(F.x=S?i.touches[0].clientX:i.clientX,F.y=S?i.touches[0].clientY:i.clientY,document.addEventListener(S?"touchmove":"mousemove",he,!0),document.addEventListener(S?"touchend":"mouseup",be,!0)))}const he=Ue(i=>{ee.value=!0,W.x=S?i.touches[0].clientX:i.clientX,W.y=S?i.touches[0].clientY:i.clientY;const h=W.x-F.x,m=W.y-F.y;j.y=m,j.x=h},o.throttle);function be(){const i=o.dir==="rtl"?-1:1,h=Math.sign(j.x)*.4,m=Math.round(j.x/d.value+h)*i;if(m&&!S){const A=Ae=>{window.removeEventListener("click",A,!0)};window.addEventListener("click",A,!0)}L(f.value-m),j.x=0,j.y=0,ee.value=!1,document.removeEventListener(S?"touchmove":"mousemove",he,!0),document.removeEventListener(S?"touchend":"mouseup",be,!0)}function ye(){!o.autoplay||o.autoplay<=0||(N=setInterval(()=>{o.pauseAutoplayOnHover&&q.value||J()},o.autoplay))}function we(){N&&(clearInterval(N),N=null),ye()}const E=v(!1);function L(i){const h=o.wrapAround?i:ue({val:i,max:M.value,min:P.value});f.value===h||E.value||(t("slide-start",{slidingToIndex:i,currentSlideIndex:f.value,prevSlideIndex:I.value,slidesCount:u.value}),E.value=!0,I.value=f.value,f.value=h,Q=setTimeout(()=>{if(o.wrapAround){const m=ce({val:h,max:M.value,min:0});m!==f.value&&(f.value=m,t("loop",{currentSlideIndex:f.value,slidingToIndex:i}))}t("update:modelValue",f.value),t("slide-end",{currentSlideIndex:f.value,prevSlideIndex:I.value,slidesCount:u.value}),E.value=!1,we()},o.transition))}function J(){L(f.value+o.itemsToScroll)}function te(){L(f.value-o.itemsToScroll)}const Se={slideTo:L,next:J,prev:te};C("nav",Se),C("isSliding",E);const _e=R(()=>He({config:o,currentSlide:f.value,slidesCount:u.value}));C("slidesToScroll",_e);const Ne=R(()=>{const i=o.dir==="rtl"?-1:1,h=_e.value*d.value*i;return{transform:`translateX(${j.x-h}px)`,transition:`${E.value?o.transition:0}ms`,margin:o.wrapAround?`0 -${u.value*d.value}px`:"",width:"100%"}});function ke(){Z(),G(),Y(),$(),we()}Object.keys(Me).forEach(i=>{["modelValue"].includes(i)||se(()=>e[i],ke)}),se(()=>e.modelValue,i=>{i!==f.value&&L(Number(i))}),se(u,Y),t("before-init"),Z();const xe={config:o,slidesCount:u,slideWidth:d,next:J,prev:te,slideTo:L,currentSlide:f,maxSlide:M,minSlide:P,middleSlide:X};a({updateBreakpointsConfigs:G,updateSlidesData:Y,updateSlideWidth:$,initDefaultConfigs:Z,restartCarousel:ke,slideTo:L,next:J,prev:te,nav:Se,data:xe});const ne=n.default||n.slides,ae=n.addons,Te=D(xe);return()=>{const i=Le(ne==null?void 0:ne(Te)),h=(ae==null?void 0:ae(Te))||[];i.forEach((oe,ie)=>oe.props.index=ie);let m=i;if(o.wrapAround){const oe=i.map((le,z)=>Ce(le,{index:-i.length+z,isClone:!0,key:`clone-before-${z}`})),ie=i.map((le,z)=>Ce(le,{index:i.length+z,isClone:!0,key:`clone-after-${z}`}));m=[...oe,...i,...ie]}r.value=i,u.value=Math.max(i.length,1);const A=w("ol",{class:"carousel__track",style:Ne.value,onMousedownCapture:o.mouseDrag?pe:null,onTouchstartPassiveCapture:o.touchDrag?pe:null},m),Ae=w("div",{class:"carousel__viewport"},A);return w("section",{ref:s,class:{carousel:!0,"is-sliding":E.value,"is-dragging":ee.value,"is-hover":q.value,"carousel--rtl":o.dir==="rtl"},dir:o.dir,"aria-label":o.i18n.ariaGallery,tabindex:"0",onMouseenter:De,onMouseleave:Ie},[Ae,h,w(Ye)])}}}),de;(function(e){e.arrowUp="arrowUp",e.arrowDown="arrowDown",e.arrowRight="arrowRight",e.arrowLeft="arrowLeft"})(de||(de={}));const We={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};function qe(e){return e in de}const ve=e=>{const n=y("config",D(Object.assign({},g))),t=String(e.name),a=`icon${t.charAt(0).toUpperCase()+t.slice(1)}`;if(!t||typeof t!="string"||!qe(t))return;const l=We[t],s=w("path",{d:l}),r=n.i18n[a]||e.title||t,d=w("title",r);return w("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":r},[d,s])};ve.props={name:String,title:String};const Je=(e,{slots:n,attrs:t})=>{const{next:a,prev:l}=n||{},s=y("config",D(Object.assign({},g))),r=y("maxSlide",v(1)),d=y("minSlide",v(1)),u=y("currentSlide",v(1)),o=y("nav",{}),{dir:p,wrapAround:_,i18n:f}=s,I=p==="rtl",X=w("button",{type:"button",class:["carousel__prev",!_&&u.value<=d.value&&"carousel__prev--disabled",t==null?void 0:t.class],"aria-label":f.ariaPreviousSlide,onClick:o.prev},(l==null?void 0:l())||w(ve,{name:I?"arrowRight":"arrowLeft"})),M=w("button",{type:"button",class:["carousel__next",!_&&u.value>=r.value&&"carousel__next--disabled",t==null?void 0:t.class],"aria-label":f.ariaNextSlide,onClick:o.next},(a==null?void 0:a())||w(ve,{name:I?"arrowLeft":"arrowRight"}));return[X,M]};var Ke=fe({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:n}){const t=y("config",D(Object.assign({},g))),a=y("currentSlide",v(0)),l=y("slidesToScroll",v(0)),s=y("isSliding",v(!1)),r=R(()=>e.index===a.value),d=R(()=>e.index===a.value-1),u=R(()=>e.index===a.value+1),o=R(()=>{const p=Math.floor(l.value),_=Math.ceil(l.value+t.itemsToShow-1);return e.index>=p&&e.index<=_});return()=>{var p;return w("li",{style:{width:`${100/t.itemsToShow}%`},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":o.value,"carousel__slide--active":r.value,"carousel__slide--prev":d.value,"carousel__slide--next":u.value,"carousel__slide--sliding":s.value},"aria-hidden":!o.value},(p=n.default)===null||p===void 0?void 0:p.call(n,{isActive:r.value,isClone:e.isClone,isPrev:d.value,isNext:u.value,isSliding:s.value,isVisible:o.value}))}}});const Qe=["src"],Ze={__name:"DialogGallery",props:{images:{type:Array,required:!0}},setup(e,{expose:n}){const t=v(!1),a=v(0);return n({open:s=>{a.value=s,t.value=!0}}),(s,r)=>{const d=V("v-dialog");return b(),U(d,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=u=>t.value=u),width:"60%",opacity:.6},{default:x(()=>[B(K(Fe),{"model-value":a.value},{addons:x(()=>[e.images.length>1?(b(),U(K(Je),{key:0})):je("",!0)]),default:x(()=>[(b(!0),k(H,null,re(e.images,(u,o)=>(b(),U(K(Ke),{key:o},{default:x(()=>[c("img",{src:u,cover:"",class:"rounded-md max-w-[80vw] mx-auto max-h-[80vh] object-cover"},null,8,Qe)]),_:2},1024))),128))]),_:1},8,["model-value"])]),_:1},8,["modelValue"])}}};function et(e,n=T.DATE_FULL){const t=T.fromISO(e);return typeof n=="string"?t.toFormat(n):t.toLocaleString(n)}function tt(e,n=T.DATE_FULL){return n(e)}function nt(e,n=T.DATETIME_MED){return T.fromISO(e).toLocaleString(n)}function at(e,n=T.TIME_SIMPLE){return T.fromISO(e).toLocaleString(n)}function ot(e,n={}){let{reverse:t=!1,parts:a=2,from:l=null}=n;const s=T.fromISO(e),r=["months","days","hours","minutes"];l=l==null?T.now():T.fromISO(l);const d=t?s.diff(l,r):l.diff(s,r);return it(Ee.fromObject(d.toObject()),a)}function it(e,n=2){const t=["years","months","days","hours","minutes","seconds"],l=Object.entries(e.shiftTo(...t).normalize().toObject()).filter(([r,d])=>d>0).map(([r,d])=>[r,Math.ceil(d)]).slice(0,n);return Ee.fromObject(l.length===0?{[t[n-1]]:0}:Object.fromEntries(l)).toHuman()}const lt={format:et,date:tt,datetime:nt,time:at,toHuman:ot},st={class:"flex gap-4 p-4"},rt={class:"w-1/3"},ut={class:"truncate max-w-12"},ct={key:0},dt={key:1},vt={key:0},ft={key:1},mt={class:"w-2/3 flex justify-end"},gt={key:0},pt={class:"-mt-3 text-sm italic opacity-70 mb-1"},ht={key:1,class:"flex justify-center divide-x-2 divide-gray-400 border-2 border-gray-400 rounded-lg shadow-lg overflow-hidden"},bt=["src","onClick"],wt={__name:"CardTask",props:{task:{type:Object,required:!0}},setup(e){const n=v(null);return(t,a)=>{const l=V("v-chip"),s=V("v-table"),r=V("v-list-item"),d=V("v-list"),u=V("v-card");return b(),U(u,{class:"bg-zinc-200 rounded-md",rounded:"lg",elevation:2},{default:x(()=>[c("div",st,[c("div",rt,[B(l,{class:"mb-3",size:"small"},{default:x(()=>[Oe("ID: "+O(e.task.id),1)]),_:1}),B(s,{density:"compact"},{default:x(()=>[c("tbody",null,[c("tr",null,[a[0]||(a[0]=c("td",{class:"opacity-70"},"Файл",-1)),c("td",ut,O(e.task.original_filename),1)]),c("tr",null,[a[1]||(a[1]=c("td",{class:"opacity-70"},"Загружено",-1)),c("td",null,O(K(lt).toHuman(e.task.created_at,{parts:1}))+" назад ",1)]),c("tr",null,[a[2]||(a[2]=c("td",{class:"opacity-70"},"Статус",-1)),c("td",null,O(e.task.status),1)]),c("tr",null,[a[3]||(a[3]=c("td",{class:"opacity-70"},"Model",-1)),c("td",null,O(e.task.cleaning_model),1)]),c("tr",null,[a[4]||(a[4]=c("td",{class:"opacity-70"},"Mask Time",-1)),c("td",null,[e.task.mask_time_seconds?(b(),k("span",ct,O(e.task.mask_time_seconds)+" сек ",1)):(b(),k("span",dt,"–"))])]),c("tr",null,[a[5]||(a[5]=c("td",{class:"opacity-70"},"Clean Time",-1)),c("td",null,[e.task.clean_time_seconds?(b(),k("span",vt,O(e.task.clean_time_seconds)+" сек ",1)):(b(),k("span",ft,"–"))])])])]),_:1})]),c("div",mt,[e.task.type==="multiple"?(b(),k("div",gt,[c("div",pt," Всего файлов в архиве "+O(e.task.subtasks.length),1),B(d,{lines:"one","max-height":"16rem",class:"border rounded-lg !bg-white"},{default:x(()=>[(b(!0),k(H,null,re(e.task.subtasks,(o,p)=>(b(),U(r,{key:p,title:o.original_filename,"prepend-avatar":o.files[0],class:"roundless",onClick:Pe(_=>t.$inertia.visit(t.route("task",o.id)),["stop","prevent"])},{default:x(()=>[B(l,{class:"mb-3",size:"small",density:"compact"},{default:x(()=>[Oe(" ID: "+O(o.id),1)]),_:2},1024)]),_:2},1032,["title","prepend-avatar","onClick"]))),128))]),_:1})])):(b(),k("div",ht,[(b(!0),k(H,null,re(e.task.files,(o,p)=>(b(),k(H,{key:p},[o?(b(),k("img",{key:0,src:o,class:"max-w-64 max-h-64 object-cover cursor-pointer",onClick:()=>n.value.open(p)},null,8,bt)):je("",!0)],64))),128)),B(Ze,{ref_key:"dialogGallery",ref:n,images:e.task.files},null,8,["images"])]))])])]),_:1})}}};export{lt as D,wt as _};
