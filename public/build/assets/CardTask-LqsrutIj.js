import{D as ge,r as v,E as I,G as A,A as Ve,B as Be,H as Re,I as R,J as re,K as Me,L as S,M as w,F as U,a as L,o as y,g as P,w as _,b as B,u as K,k as ue,c as D,l as ce,d as c,N as k,O as Ee,f as se,t as C,e as Pe}from"./app-DK_a9hzu.js";/**
 * Vue 3 Carousel 0.3.4
 * (c) 2024
 * @license MIT
 */const p={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},je={itemsToShow:{default:p.itemsToShow,type:Number},itemsToScroll:{default:p.itemsToScroll,type:Number},wrapAround:{default:p.wrapAround,type:Boolean},throttle:{default:p.throttle,type:Number},snapAlign:{default:p.snapAlign,validator(e){return["start","end","center","center-even","center-odd"].includes(e)}},transition:{default:p.transition,type:Number},breakpoints:{default:p.breakpoints,type:Object},autoplay:{default:p.autoplay,type:Number},pauseAutoplayOnHover:{default:p.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:p.mouseDrag,type:Boolean},touchDrag:{default:p.touchDrag,type:Boolean},dir:{default:p.dir,validator(e){return["rtl","ltr"].includes(e)}},i18n:{default:p.i18n,type:Object},settings:{default(){return{}},type:Object}};function $e({config:e,slidesCount:n}){const{snapAlign:t,wrapAround:a,itemsToShow:i=1}=e;if(a)return Math.max(n-1,0);let l;switch(t){case"start":l=n-i;break;case"end":l=n-1;break;case"center":case"center-odd":l=n-Math.ceil((i-.5)/2);break;case"center-even":l=n-Math.ceil(i/2);break;default:l=0;break}return Math.max(l,0)}function ze({config:e,slidesCount:n}){const{wrapAround:t,snapAlign:a,itemsToShow:i=1}=e;let l=0;if(t||i>n)return l;switch(a){case"start":l=0;break;case"end":l=i-1;break;case"center":case"center-odd":l=Math.floor((i-1)/2);break;case"center-even":l=Math.floor((i-2)/2);break;default:l=0;break}return l}function de({val:e,max:n,min:t}){return n<t?e:Math.min(Math.max(e,t),n)}function He({config:e,currentSlide:n,slidesCount:t}){const{snapAlign:a,wrapAround:i,itemsToShow:l=1}=e;let s=n;switch(a){case"center":case"center-odd":s-=(l-1)/2;break;case"center-even":s-=(l-2)/2;break;case"end":s-=l-1;break}return i?s:de({val:s,max:t-l,min:0})}function Le(e){return e?e.reduce((n,t)=>{var a;return t.type===U?[...n,...Le(t.children)]:((a=t.type)===null||a===void 0?void 0:a.name)==="CarouselSlide"?[...n,t]:n},[]):[]}function ve({val:e,max:n,min:t=0}){return e>n?ve({val:e-(n+1),max:n,min:t}):e<t?ve({val:e+(n+1),max:n,min:t}):e}function Ue(e,n){let t;return n?function(...a){const i=this;t||(e.apply(i,a),t=!0,setTimeout(()=>t=!1,n))}:e}function Xe(e,n){let t;return function(...a){t&&clearTimeout(t),t=setTimeout(()=>{e(...a),t=null},n)}}function Ge(e="",n={}){return Object.entries(n).reduce((t,[a,i])=>t.replace(`{${a}}`,String(i)),e)}var Ye=ge({name:"ARIA",setup(){const e=w("config",I(Object.assign({},p))),n=w("currentSlide",v(0)),t=w("slidesCount",v(0));return()=>S("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},Ge(e.i18n.itemXofY,{currentSlide:n.value+1,slidesCount:t.value}))}}),Fe=ge({name:"Carousel",props:je,setup(e,{slots:n,emit:t,expose:a}){var i;const l=v(null),s=v([]),d=v(0),u=v(0),r=I(Object.assign({},p));let m=Object.assign({},p),b;const f=v((i=e.modelValue)!==null&&i!==void 0?i:0),N=v(0),X=v(0),O=v(0),$=v(0);let V,Q;A("config",r),A("slidesCount",u),A("currentSlide",f),A("maxSlide",O),A("minSlide",$),A("slideWidth",d);function Z(){b=Object.assign({},e.breakpoints),m=Object.assign(Object.assign(Object.assign({},m),e),{i18n:Object.assign(Object.assign({},m.i18n),e.i18n),breakpoints:void 0}),pe(m)}function G(){if(!b||!Object.keys(b).length)return;const o=Object.keys(b).map(g=>Number(g)).sort((g,T)=>+T-+g);let h=Object.assign({},m);o.some(g=>{const T=window.matchMedia(`(min-width: ${g}px)`).matches;return T&&(h=Object.assign(Object.assign({},h),b[g])),T}),pe(h)}function pe(o){Object.entries(o).forEach(([h,g])=>r[h]=g)}const he=Xe(()=>{G(),Y(),z()},16);function z(){if(!l.value)return;const o=l.value.getBoundingClientRect();d.value=o.width/r.itemsToShow}function Y(){u.value<=0||(X.value=Math.ceil((u.value-1)/2),O.value=$e({config:r,slidesCount:u.value}),$.value=ze({config:r,slidesCount:u.value}),r.wrapAround||(f.value=de({val:f.value,max:O.value,min:$.value})))}Ve(()=>{Be(()=>z()),setTimeout(()=>z(),1e3),G(),Se(),window.addEventListener("resize",he,{passive:!0}),t("init")}),Re(()=>{Q&&clearTimeout(Q),V&&clearInterval(V),window.removeEventListener("resize",he,{passive:!0})});let x=!1;const F={x:0,y:0},W={x:0,y:0},M=I({x:0,y:0}),q=v(!1),ee=v(!1),De=()=>{q.value=!0},Ie=()=>{q.value=!1};function be(o){["INPUT","TEXTAREA","SELECT"].includes(o.target.tagName)||(x=o.type==="touchstart",x||o.preventDefault(),!(!x&&o.button!==0||j.value)&&(F.x=x?o.touches[0].clientX:o.clientX,F.y=x?o.touches[0].clientY:o.clientY,document.addEventListener(x?"touchmove":"mousemove",ye,!0),document.addEventListener(x?"touchend":"mouseup",we,!0)))}const ye=Ue(o=>{ee.value=!0,W.x=x?o.touches[0].clientX:o.clientX,W.y=x?o.touches[0].clientY:o.clientY;const h=W.x-F.x,g=W.y-F.y;M.y=g,M.x=h},r.throttle);function we(){const o=r.dir==="rtl"?-1:1,h=Math.sign(M.x)*.4,g=Math.round(M.x/d.value+h)*o;if(g&&!x){const T=Oe=>{window.removeEventListener("click",T,!0)};window.addEventListener("click",T,!0)}E(f.value-g),M.x=0,M.y=0,ee.value=!1,document.removeEventListener(x?"touchmove":"mousemove",ye,!0),document.removeEventListener(x?"touchend":"mouseup",we,!0)}function Se(){!r.autoplay||r.autoplay<=0||(V=setInterval(()=>{r.pauseAutoplayOnHover&&q.value||J()},r.autoplay))}function xe(){V&&(clearInterval(V),V=null),Se()}const j=v(!1);function E(o){const h=r.wrapAround?o:de({val:o,max:O.value,min:$.value});f.value===h||j.value||(t("slide-start",{slidingToIndex:o,currentSlideIndex:f.value,prevSlideIndex:N.value,slidesCount:u.value}),j.value=!0,N.value=f.value,f.value=h,Q=setTimeout(()=>{if(r.wrapAround){const g=ve({val:h,max:O.value,min:0});g!==f.value&&(f.value=g,t("loop",{currentSlideIndex:f.value,slidingToIndex:o}))}t("update:modelValue",f.value),t("slide-end",{currentSlideIndex:f.value,prevSlideIndex:N.value,slidesCount:u.value}),j.value=!1,xe()},r.transition))}function J(){E(f.value+r.itemsToScroll)}function te(){E(f.value-r.itemsToScroll)}const _e={slideTo:E,next:J,prev:te};A("nav",_e),A("isSliding",j);const ke=R(()=>He({config:r,currentSlide:f.value,slidesCount:u.value}));A("slidesToScroll",ke);const Ne=R(()=>{const o=r.dir==="rtl"?-1:1,h=ke.value*d.value*o;return{transform:`translateX(${M.x-h}px)`,transition:`${j.value?r.transition:0}ms`,margin:r.wrapAround?`0 -${u.value*d.value}px`:"",width:"100%"}});function Te(){Z(),G(),Y(),z(),xe()}Object.keys(je).forEach(o=>{["modelValue"].includes(o)||re(()=>e[o],Te)}),re(()=>e.modelValue,o=>{o!==f.value&&E(Number(o))}),re(u,Y),t("before-init"),Z();const Ae={config:r,slidesCount:u,slideWidth:d,next:J,prev:te,slideTo:E,currentSlide:f,maxSlide:O,minSlide:$,middleSlide:X};a({updateBreakpointsConfigs:G,updateSlidesData:Y,updateSlideWidth:z,initDefaultConfigs:Z,restartCarousel:Te,slideTo:E,next:J,prev:te,nav:_e,data:Ae});const ne=n.default||n.slides,ae=n.addons,Ce=I(Ae);return()=>{const o=Le(ne==null?void 0:ne(Ce)),h=(ae==null?void 0:ae(Ce))||[];o.forEach((oe,ie)=>oe.props.index=ie);let g=o;if(r.wrapAround){const oe=o.map((le,H)=>Me(le,{index:-o.length+H,isClone:!0,key:`clone-before-${H}`})),ie=o.map((le,H)=>Me(le,{index:o.length+H,isClone:!0,key:`clone-after-${H}`}));g=[...oe,...o,...ie]}s.value=o,u.value=Math.max(o.length,1);const T=S("ol",{class:"carousel__track",style:Ne.value,onMousedownCapture:r.mouseDrag?be:null,onTouchstartPassiveCapture:r.touchDrag?be:null},g),Oe=S("div",{class:"carousel__viewport"},T);return S("section",{ref:l,class:{carousel:!0,"is-sliding":j.value,"is-dragging":ee.value,"is-hover":q.value,"carousel--rtl":r.dir==="rtl"},dir:r.dir,"aria-label":r.i18n.ariaGallery,tabindex:"0",onMouseenter:De,onMouseleave:Ie},[Oe,h,S(Ye)])}}}),fe;(function(e){e.arrowUp="arrowUp",e.arrowDown="arrowDown",e.arrowRight="arrowRight",e.arrowLeft="arrowLeft"})(fe||(fe={}));const We={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};function qe(e){return e in fe}const me=e=>{const n=w("config",I(Object.assign({},p))),t=String(e.name),a=`icon${t.charAt(0).toUpperCase()+t.slice(1)}`;if(!t||typeof t!="string"||!qe(t))return;const i=We[t],l=S("path",{d:i}),s=n.i18n[a]||e.title||t,d=S("title",s);return S("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":s},[d,l])};me.props={name:String,title:String};const Je=(e,{slots:n,attrs:t})=>{const{next:a,prev:i}=n||{},l=w("config",I(Object.assign({},p))),s=w("maxSlide",v(1)),d=w("minSlide",v(1)),u=w("currentSlide",v(1)),r=w("nav",{}),{dir:m,wrapAround:b,i18n:f}=l,N=m==="rtl",X=S("button",{type:"button",class:["carousel__prev",!b&&u.value<=d.value&&"carousel__prev--disabled",t==null?void 0:t.class],"aria-label":f.ariaPreviousSlide,onClick:r.prev},(i==null?void 0:i())||S(me,{name:N?"arrowRight":"arrowLeft"})),O=S("button",{type:"button",class:["carousel__next",!b&&u.value>=s.value&&"carousel__next--disabled",t==null?void 0:t.class],"aria-label":f.ariaNextSlide,onClick:r.next},(a==null?void 0:a())||S(me,{name:N?"arrowLeft":"arrowRight"}));return[X,O]};var Ke=ge({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:n}){const t=w("config",I(Object.assign({},p))),a=w("currentSlide",v(0)),i=w("slidesToScroll",v(0)),l=w("isSliding",v(!1)),s=R(()=>e.index===a.value),d=R(()=>e.index===a.value-1),u=R(()=>e.index===a.value+1),r=R(()=>{const m=Math.floor(i.value),b=Math.ceil(i.value+t.itemsToShow-1);return e.index>=m&&e.index<=b});return()=>{var m;return S("li",{style:{width:`${100/t.itemsToShow}%`},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":r.value,"carousel__slide--active":s.value,"carousel__slide--prev":d.value,"carousel__slide--next":u.value,"carousel__slide--sliding":l.value},"aria-hidden":!r.value},(m=n.default)===null||m===void 0?void 0:m.call(n,{isActive:s.value,isClone:e.isClone,isPrev:d.value,isNext:u.value,isSliding:l.value,isVisible:r.value}))}}});const Qe=["src"],Ze={__name:"DialogGallery",props:{images:{type:Array,required:!0}},setup(e,{expose:n}){const t=v(!1),a=v(0);return n({open:l=>{a.value=l,t.value=!0}}),(l,s)=>{const d=L("v-dialog");return y(),P(d,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=u=>t.value=u),width:"60%",opacity:.6},{default:_(()=>[B(K(Fe),{"model-value":a.value},{addons:_(()=>[e.images.length>1?(y(),P(K(Je),{key:0})):ue("",!0)]),default:_(()=>[(y(!0),D(U,null,ce(e.images,(u,r)=>(y(),P(K(Ke),{key:r},{default:_(()=>[c("img",{src:u,cover:"",class:"rounded-md max-w-[80vw] mx-auto max-h-[80vh] object-cover"},null,8,Qe)]),_:2},1024))),128))]),_:1},8,["model-value"])]),_:1},8,["modelValue"])}}};function et(e,n=k.DATE_FULL){const t=k.fromISO(e);return typeof n=="string"?t.toFormat(n):t.toLocaleString(n)}function tt(e,n=k.DATE_FULL){return n(e)}function nt(e,n=k.DATETIME_MED){return k.fromISO(e).toLocaleString(n)}function at(e,n=k.TIME_SIMPLE){return k.fromISO(e).toLocaleString(n)}function ot(e,n={}){let{reverse:t=!1,parts:a=2,from:i=null}=n;const l=k.fromISO(e),s=["months","days","hours","minutes"];i=i==null?k.now():k.fromISO(i);const d=t?l.diff(i,s):i.diff(l,s);return it(Ee.fromObject(d.toObject()),a)}function it(e,n=2){const t=["years","months","days","hours","minutes","seconds"],i=Object.entries(e.shiftTo(...t).normalize().toObject()).filter(([s,d])=>d>0).map(([s,d])=>[s,Math.ceil(d)]).slice(0,n);return Ee.fromObject(i.length===0?{[t[n-1]]:0}:Object.fromEntries(i)).toHuman()}const lt={format:et,date:tt,datetime:nt,time:at,toHuman:ot},rt={class:"flex gap-4 p-4"},st={class:"w-1/3"},ut={class:"truncate max-w-12"},ct={class:"w-2/3 flex justify-end"},dt={key:0},vt={class:"-mt-3 text-sm italic opacity-70 mb-1"},ft={key:1,class:"flex justify-center divide-x-2 divide-gray-400 border-2 border-gray-400 rounded-lg shadow-lg overflow-hidden"},mt=["src","onClick"],pt={__name:"CardTask",props:{task:{type:Object,required:!0}},setup(e){const n=v(null);return(t,a)=>{const i=L("v-chip"),l=L("v-progress-circular"),s=L("v-table"),d=L("v-list-item"),u=L("v-list"),r=L("v-card");return y(),P(r,{class:"bg-zinc-200 rounded-md",rounded:"lg",elevation:2},{default:_(()=>[c("div",rt,[c("div",st,[B(i,{class:"mb-3",size:"small"},{default:_(()=>[se("ID: "+C(e.task.id),1)]),_:1}),B(s,{density:"compact"},{default:_(()=>[c("tbody",null,[c("tr",null,[a[0]||(a[0]=c("td",{class:"opacity-70"},"Файл",-1)),c("td",ut,C(e.task.original_filename),1)]),c("tr",null,[a[1]||(a[1]=c("td",{class:"opacity-70"},"Загружено",-1)),c("td",null,C(K(lt).toHuman(e.task.created_at,{parts:1}))+" назад ",1)]),c("tr",null,[a[2]||(a[2]=c("td",{class:"opacity-70"},"Статус",-1)),c("td",null,[se(C(e.task.status)+" ",1),e.task.status!="cleaner_completed"?(y(),P(l,{key:0,indeterminate:"",size:20,width:2})):ue("",!0)])]),c("tr",null,[a[3]||(a[3]=c("td",{class:"opacity-70"},"Model",-1)),c("td",null,C(e.task.cleaning_model),1)]),c("tr",null,[a[4]||(a[4]=c("td",{class:"opacity-70"},"Mask Time",-1)),c("td",null,C(e.task.mask_time_seconds??"-")+" сек",1)]),c("tr",null,[a[5]||(a[5]=c("td",{class:"opacity-70"},"Clean Time",-1)),c("td",null,C(e.task.clean_time_seconds??"-")+" сек",1)])])]),_:1})]),c("div",ct,[e.task.type==="multiple"?(y(),D("div",dt,[c("div",vt," Всего файлов в архиве "+C(e.task.subtasks.length),1),B(u,{lines:"one","max-height":"16rem",class:"border rounded-lg"},{default:_(()=>[(y(!0),D(U,null,ce(e.task.subtasks,(m,b)=>(y(),P(d,{key:b,title:m.original_filename,"prepend-avatar":m.files[0],class:"roundless",onClick:Pe(f=>t.$inertia.visit(t.route("tasks.show",m.id)),["stop","prevent"])},{default:_(()=>[B(i,{class:"mb-3",size:"small",density:"compact"},{default:_(()=>[se(" ID: "+C(m.id),1)]),_:2},1024)]),_:2},1032,["title","prepend-avatar","onClick"]))),128))]),_:1})])):(y(),D("div",ft,[(y(!0),D(U,null,ce(e.task.files,(m,b)=>(y(),D(U,{key:b},[m?(y(),D("img",{key:0,src:m,class:"max-w-64 max-h-64 object-cover cursor-pointer",onClick:()=>n.value.open(b)},null,8,mt)):ue("",!0)],64))),128)),B(Ze,{ref_key:"dialogGallery",ref:n,images:e.task.files},null,8,["images"])]))])])]),_:1})}}};export{lt as D,pt as _};
